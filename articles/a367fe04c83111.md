---
title: "Vuexã®åŸºæœ¬"
emoji: "ğŸ‰"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["vue", "vuex"]
published: true
---
# Vuex
ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€å…ƒç®¡ç†ã™ã‚‹ä»•çµ„ã¿
props, $emitã«ã‚ˆã‚‹ç®¡ç†ã®é›£ã—ã„å ´åˆã«(ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¤§é‡ã€éšå±¤ãŒè¤‡é›‘)ã«ä½¿ç”¨ã™ã‚‹ã€‚
ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã§ã‚‚ãƒ‡ãƒ¼ã‚¿ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒå¯èƒ½
state, getters, mutations, actionsã®4ã¤ã®æ©Ÿèƒ½?ã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹ã€‚

## state
vue.jsã§ã„ã†dataãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨åŒã˜åƒã
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ãã¯ã€this.$store.state.messageã§è¡¨ç¤ºã§ãã‚‹ã€‚
è¨˜è¿°æ–¹æ³•
```js
state: {
    message: 'Hello World'
}
```
```js
console.log(this.$store.state.message) 
=> 'Hello World'
```


## getters
vue.jsã§ã„ã†computedãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨åŒã˜åƒã
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ãã¯ã€this.$store.getters.messageã§è¡¨ç¤ºã§ãã‚‹ã€‚

è¨˜è¿°æ–¹æ³•
```js
state: {
    msg: 'Hello World',
    id: [1, 2, 3, 4, 5, 6]
},

getters: {
    message(state) {
        return state.msg
    },
    ary(state) {
        return state.id.filter(item => item > 4)
    } 
}

```
```js
console.log(this.$store.getters.ary) 
=> [5, 6]
```

## mutations
stateã®æ›´æ–°ã‚’è¡Œã†
vueã§ã„ã†methodsã¨åŒã˜åƒãã‚’ã™ã‚‹
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã¨ãã¯ã€this.$store.commit('åå‰')ã¨ã™ã‚‹
éåŒæœŸå‡¦ç†ã‚’è¡Œã£ã¦ã¯ãªã‚‰ãªã„

è¨˜è¿°æ–¹æ³•
```js
<template>
    <button :click="count">ã‚«ã‚¦ãƒ³ãƒˆ</button>
    <p>{{ number }}</p>
</template>

<script>
export default {
    computed: {
        number() {
            return this.$store.state.count
        }
    },
    methods: {
        count() {
            this.$store.commit('count')
        }
    }
}
</script>
```
```js
export default new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    count(state) {
      state.count++
    }
  },
  actions: {
  }
})
```

## actions
stateã®æ›´æ–°ã‚’mutationsã‚’çµŒç”±ã—ã¦è¡Œã†
éåŒæœŸå‡¦ç†ã‚’è¡Œãˆã‚‹ã€‚
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã¨ãã¯this.$store.dispatch('åå‰')

è¨˜è¿°æ–¹æ³•
```js
export default new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    setCount(state) {
      state.count++
    }
  },
  actions: {
    count({commit}) {
        commit('setCount')
    }
  }
})
```

éåŒæœŸã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—(npm install axiosãŒå¿…é ˆã§ã™)
```js
actions: {
  getData({commit}){
    return axios.get('https://jsonplaceholder.typicode.com/users')
        .then(response => {
          commit('setData',response.data)
        })
  }
}
```